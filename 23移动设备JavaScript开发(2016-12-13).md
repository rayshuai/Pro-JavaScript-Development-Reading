# 移动设备JavaScript开发(2016/12/13)

标签（空格分隔）： 前端 js

---

> 今天是这一章的第一部分内容，移动Web开发的局限性。224页~227页


## **移动Web开发的局限性**
> 了解移动Web开发的局限性可以有效的把这些的影响最小化，为用户提供最好的使用体验。

### **电池的续航能力**
- 现在智能机的续航能力大家也知道，我就不赘述了。
- 如何在保证体验的情况下**减小耗电量**，书中提了以下几点：
    1. 使用CSS3代替JavaScript来实现动画和图片过渡
    2. 如果想要访问移动设备上各种传感器的数据，则仅在真正需要这些值期间才进行零星的间隔式访问。
    3. 在传感器数据频繁变化的情况下，使用事件框架化原则，使代码的执行次数变得更少。

### **网络带宽速度与延时**
- 在Wi-Fi和有线网络的环境下，延时时间是很短的。这意味着客户端和服务器之间的通信是很通畅，用户操作的响应也会很及时。但在移动网络的环境下，延时问题就会变得明显一些。
- 一些可以优化的方案：
    1. 把页面加载时需要加载的各个JavaScript文件整合为一个文件并进行JS压缩，减少一些加载项，在真正需要使用这些文件时才实施加载。
    2. 对各个CSS文件也要进行整合和压缩。
    3. CSS sprite
    4. 在可能的情况子啊，尽量把较小的接近图标尺寸的图片以base64编码方式放在CSS文件中，以data URI的方式直接进行引用。了解[更多内容][1]
    5. **跨域并行下载**方法

### **板载内存容量**
- 一旦图片从服务器下载到设备上，它就会以非压缩的形式存储在设备的内存中。因此，将大图片通过网络传输到移动设备然后在页面中缩小图片的显示尺寸所带来的内存消耗，将与单纯显示大图片的内存消耗相同。
- 为了实现更高效的数据传输，我们对JavaScript文件进行了压缩。而一旦压缩的JavaScript文件进入设备后，它就会解压并存储在内存中。
- 优化：
    1. 使用**CSS transform**可以不把图片加载至主内存，而是加载至显存。显存里的图片处理是硬件加速的。
```
element {
    /*使用GPU进行硬件加速*/
    -webkit-transform: translateZ(0);
    -moz-transform: translateZ(0);
    -ms-transform: translateZ(0);
    -o-transform: translateZ(0);
    transform: translateZ(0);
}
```
    
### **操作系统响应能力**
- 一般情况下，如果用户在操作动作发生后300ms内还得不到反馈响应，他们就会觉得有明显的不流畅感，从而产生负面印象。
- 对于用户与页面发生的任何交互动作，这在个时间段内产生一些可视化的回应动作是很有必要的。这里有Time Holman收集和整理的内容，[新一代的指示方式][2]


## **通过JavaScript访问移动设备上的传感器**
### **访问地理位置定位传感器**
### **访问触摸传感器**
### **访问紫塔传感器和方向传感器**
### **访问运动传感器**
### **未能访问的传感器**
### **事件框架化和传感器数据**
### **利用传感器数据进一步发挥**

## **网络连接故障与离线状态**
### **在线与离线状态的检测**
### **利用Web Storage API长期保存数据**
### **HTML5 Application Cache**
### **响应式网页设计的JavaScript**


  [1]: https://css-tricks.com/data-uris/
  [2]: http://codepen.io/collection/HtAne/1