# 使用CanvasAPI创建游戏(2016/12/16)

标签（空格分隔）： 前端 js

---

## **引言**
> **canvas**元素的内容是以像素方式显示在绘图平面上。在同一**canvas**中，在一定的时间周期内，以细微的差异不断地进行清楚，重绘，我们可以在元素内实现动画和运动的感觉。通过将此动画和触屏上的控制器或鼠标键盘进行关联，我们可以实现让用户操控屏幕上发生的事情。

- 今天是这一章的前三部分，248页~258页。

### **1. 在Canvas中基本绘图操作**
> 在canvas表面出现的绘图操作只通过JavaScript实现。我们需要首先获取对canvas元素二维绘图上下文的引用。

- 至于详细的文档接口我就不一一列举了。

### **2. 高清Canvas元素**
- 屏幕技术不断发展，目前已经发展出了高清屏幕。有时称之为**视网膜屏幕显示(retina)**。它的单个像素之间的边界不会被这些裸眼视网膜分辨出来。
- **window.devicePixelRatio**属性：表示当前屏幕所支持的标准显示分辨率对应的显示分辨率系数。例如，1表示标准显示屏，2表示视网膜显示屏。
- 如何实现高清Canvas元素，参照[这篇文章][1]

### **3. 使用Canvas制作游戏**
#### **3.1. 在Canvas上绘制图像**
- **drawImage()**方法
- **图片拼合技术（Sprite Map Images）**

#### **3.2 Canvas中的动画**
- 定时进行**重绘**

#### **3.3 游戏控制**
- **keydown事件**

#### **3.4 碰撞检测**


#### **3.5 游戏主循环**
- **requestAnimationFrame()**方法，我在另一篇文章提到过

#### **3.6 分层Canvas以提高性能**
- 尽量避免重新绘制游戏中的静态部分
- 可以创建两个canvas元素，一个用于绘制背景，另一个用于所有移动动作和动画效果的定期更新


  [1]: http://www.html5rocks.com/en/tutorials/canvas/hidpi/